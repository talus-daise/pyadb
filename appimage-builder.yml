version: 1

script:
  - rm -rf AppDir || true
  - mkdir -p AppDir/usr/bin
  - mkdir -p AppDir/usr/share/applications
  - mkdir -p AppDir/usr/share/icons/hicolor/256x256/apps

  # PyInstaller の成果物を配置
  - cp dist/PyADB AppDir/usr/bin/pyadb

  # desktop ファイル
  - |
    cat > AppDir/usr/share/applications/pyadb.desktop <<EOF
    [Desktop Entry]
    Type=Application
    Name=PyADB
    Exec=pyadb
    Icon=pyadb
    Categories=Utility;
    EOF

  # 仮アイコン（推奨：後で差し替え）
  - convert -size 256x256 xc:lightgray \
    AppDir/usr/share/icons/hicolor/256x256/apps/pyadb.png

AppDir:
  path: AppDir

  app_info:
    id: org.pyadb.PyADB
    name: PyADB
    icon: pyadb
    version: ${VERSION}
    exec: usr/bin/pyadb

AppImage:
  arch: x86_64